### 内存检测

> 为了得知操作系统可用的内存空间有多少，在内核进入保护模式之前需要进行内存检测。

#### GCC内嵌汇编语法
```c
/* volatile : 可选，禁止编译器对汇编代码进行优化 */
__asm__ __volatile__( 
  /* 汇编指令间使用'\n'分隔 */
  "汇编指令"
  :"=限制符"(输出参数)
  :"限制符"(输入参数)
  :保留列表
)
```

#### INT中断检测内存

##### 数据结构

> Address Range Descriptor Structure，ARDS

| 字节偏移量 | 名称 | 含义 |
|:---:|:---:|:---:|
| 0-3 | BaseAddrLow | 起始地址的低32位 |
| 4-7 | BaseAddrHigh | 起始地址的高32位 |
| 8-11 | LengthLow | 内存长度的低32位（字节） |
| 12-15 | LengthHigh | 内存长度的高32位（字节） |
| 16 | Type | 本段内存的类型<br/>1:可用<br/>2:不可用 |

##### 中断调用

```asm
MOV EAX, 0xE820
INT 0x15
```

+ `EDX`存放签名`0x534d4150`
+ `ES:DI`存放数据缓冲区地址

